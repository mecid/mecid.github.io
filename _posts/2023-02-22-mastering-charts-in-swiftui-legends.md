---
title: Mastering charts in SwiftUI. Legends.
layout: post
category: Mastering SwiftUI views
image: /public/chart14.png
---

Last week we started the topic of the Swift Charts framework customization using a bunch of chart view modifiers. It is a vast topic that I divide into a few small posts. This week we will discuss configuring the legend view using the new Swift Charts framework.

{% include friends.html %}

The Swift Charts framework is smart enough to infer and display the legend view for your chart automatically. Let's take a look at the concrete example.

```swift
struct ContentView: View {
    let stats: [Stats]
    
    var body: some View {
        Chart {
            ForEach(stats, id: \.city) { stat in
                BarMark(
                    x: .value("City", stat.city),
                    y: .value("Population", stat.population)
                )
                .foregroundStyle(by: .value("Gender", stat.gender))
                .position(by: .value("Gender", stat.gender))
            }
        }
    }
}
```

> To learn more about the basics of the Charts framework, take a look at my dedicated ["Mastering charts in SwiftUI. Basics."](/2023/01/10/mastering-charts-in-swiftui-basics/) post.

As you can see in the example above, our chart has a legend view automatically generated by the Swift Charts framework. We use the *foregroundStyle* modifier on the *BarMark* type, which allows the framework to create a legend view. It looks good, but what if we don't need the legend view at all? In this case, we can use the *chartLegend* view modifier to control the visibility of the legend view.

```swift
struct ContentView: View {
    let stats: [Stats]
    
    var body: some View {
        Chart {
            ForEach(stats, id: \.city) { stat in
                BarMark(
                    x: .value("City", stat.city),
                    y: .value("Population", stat.population)
                )
                .foregroundStyle(by: .value("Gender", stat.gender))
                .position(by: .value("Gender", stat.gender))
            }
        }
        .chartLegend(.hidden)
    }
}
```

The *chartLegend* modifier allows us to control the visibility of the legend view by passing one of these three options: *automatic*, *visible*, and *hidden*. Another overload of the *chartLegend* modifier allows us to control the legend view's position, alignment, and spacing.

```swift
struct ContentView: View {
    let stats: [Stats]
    
    var body: some View {
        Chart {
            ForEach(stats, id: \.city) { stat in
                BarMark(
                    x: .value("City", stat.city),
                    y: .value("Population", stat.population)
                )
                .foregroundStyle(by: .value("Gender", stat.gender))
                .position(by: .value("Gender", stat.gender))
            }
        }
        .chartLegend(position: .top, alignment: .leading, spacing: 8)
    }
}
```

Let's move forward and customize the colors for our bars and circles in the legend view representing them.

```swift
struct ContentView: View {
    let stats: [Stats]
    
    var body: some View {
        Chart {
            ForEach(stats, id: \.city) { stat in
                BarMark(
                    x: .value("City", stat.city),
                    y: .value("Population", stat.population)
                )
                .foregroundStyle(by: .value("Gender", stat.gender))
                .position(by: .value("Gender", stat.gender))
            }
        }
        .chartForegroundStyleScale(
            domain: Gender.allCases,
            range: [.red, .orange, .black]
        )
    }
}
```

As you can see in the example above, we use the *chartForegroundStyleScale* modifier to provide both values and colors representing that values. The *chartForegroundStyleScale* modifier pairs with the *foregroundStyle* modifier and maps values you pass to colors on the chart and in the legend view.

> To learn more about customization options of the Charts framework, take a look at my dedicated ["Mastering charts in SwiftUI. Customizations."](/2023/02/15/mastering-charts-in-swiftui-customizations/) post.

You might need to provide static data for your legend view in some specific cases. For that, you can use another overload of the *chartForegroundStyleScale* modifier accepting a key-value literal.

```swift
struct ContentView: View {
    let stats: [Stats]
    
    var body: some View {
        Chart {
            ForEach(stats, id: \.city) { stat in
                BarMark(
                    x: .value("City", stat.city),
                    y: .value("Population", stat.population)
                )
                .foregroundStyle(by: .value("Gender", stat.gender))
                .position(by: .value("Gender", stat.gender))
            }
        }
        .chartForegroundStyleScale(
            [
                Gender.notSet: Color.black,
                .female: Color.orange,
                .male: Color.red
            ]
        )
    }
}
```

In the example above, we use the *chartForegroundStyleScale* and pass the dictionary with gender-color pairs. Usually, we generate this data dynamically using some logic, but you can also hardcode these values if needed.

I hope you enjoy the post. Feel free to follow me on [Twitter](https://twitter.com/mecid) and ask your questions related to this post. Thanks for reading, and see you next week!
